{"ast":null,"code":"import _objectSpread from\"/Users/jiyeong/Desktop/SHARE_BILLAGE/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/jiyeong/Desktop/SHARE_BILLAGE/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{applyMiddleware,createStore,compose}from\"redux\";import axios from\"./axios/axios\";import thunk from\"redux-thunk\";var getData=function getData(){var book=[];axios.get(\"book/all\").then(function(result){result.data.forEach(function(item){book.push(item);});});return book;};var getNotice=function getNotice(){var notice=[];axios.get(\"notice/all\").then(function(result){result.data.forEach(function(item){notice.push(item);});});return notice;};function reducer(state,action){if(state===undefined){return{selected_id:1,selected_subject:\"\",bookListBySubject:[getData()],myBookList:[],bookDeatil:[],data:getData(),noticeList:getNotice()};}var newData=_toConsumableArray(state.data);var newMyBookList=_toConsumableArray(state.myBookList);var newBookListBySubject=_toConsumableArray(state.bookListBySubject);var newState;var newNoticeList=_toConsumableArray(state.noticeList);var newSubject={selected_subject:action.subject};var newID={selected_id:action.id};//현재 선택한 값\nvar newBookDetail;var targetData=newData.find(function(currentData){return currentData.bookId===newID.selected_id;});var targetIndex=newMyBookList.findIndex(function(currentData){return currentData.bookId===newID.selected_id;});var existData=newMyBookList.find(function(currentData){return currentData.bookId===newID.selected_id;});var targetDataBySubject=newData.filter(function(currentData){return currentData.subjects===newSubject.selected_subject;});var targetDataBySearch=newData.filter(function(currentData){return currentData.title.includes(action.search);});switch(action.type){case\"like\":targetData.likeNum===0?targetData.likeNum+=1:targetData.likeNum-=1;break;case\"addMyList\":if(targetData.stock<=0){alert(\"더이상 빌릴 수 없습니다\");}else if(existData===undefined){alert(\"대여가 완료되었습니다.\");newMyBookList.push(targetData);targetData.stock-=1;}else{alert(\"이미 담겨 있습니다.\");}break;case\"removeMyList\":alert(\"반납하시겠습니까?\");newMyBookList.splice(targetIndex,1);targetData.stock+=1;break;case\"handleSubject\":newBookListBySubject.pop();newBookListBySubject.push(targetDataBySubject);break;case\"handleSearch\":newBookListBySubject.pop();newBookListBySubject.push(targetDataBySearch);break;case\"handleAll\":newBookListBySubject.pop();newBookListBySubject.push(newData);break;case\"bookDetail\":newBookDetail=[];newBookDetail.push(targetData);break;default:break;}newState=_objectSpread(_objectSpread({},state),{},{data:newData,myBookList:newMyBookList,bookListBySubject:newBookListBySubject,bookDeatil:newBookDetail,noticeList:newNoticeList});return newState;}var composeEnhancer=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;export default createStore(reducer,composeEnhancer(applyMiddleware(thunk)));","map":{"version":3,"sources":["/Users/jiyeong/Desktop/SHARE_BILLAGE/front_end/src/store.js"],"names":["applyMiddleware","createStore","compose","axios","thunk","getData","book","get","then","result","data","forEach","item","push","getNotice","notice","reducer","state","action","undefined","selected_id","selected_subject","bookListBySubject","myBookList","bookDeatil","noticeList","newData","newMyBookList","newBookListBySubject","newState","newNoticeList","newSubject","subject","newID","id","newBookDetail","targetData","find","currentData","bookId","targetIndex","findIndex","existData","targetDataBySubject","filter","subjects","targetDataBySearch","title","includes","search","type","likeNum","stock","alert","splice","pop","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__"],"mappings":"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","sourcesContent":["import { applyMiddleware, createStore, compose } from \"redux\";\n\nimport axios from \"./axios/axios\";\nimport thunk from \"redux-thunk\";\nconst getData = () => {\n  const book = [];\n  axios.get(\"book/all\").then((result) => {\n    result.data.forEach((item) => {\n      book.push(item);\n    });\n  });\n  return book;\n};\nconst getNotice = () => {\n  const notice = [];\n  axios.get(\"notice/all\").then((result) => {\n    result.data.forEach((item) => {\n      notice.push(item);\n    });\n  });\n  return notice;\n};\nfunction reducer(state, action) {\n  if (state === undefined) {\n    return {\n      selected_id: 1,\n      selected_subject: \"\",\n      bookListBySubject: [getData()],\n      myBookList: [],\n      bookDeatil: [],\n      data: getData(),\n      noticeList: getNotice(),\n    };\n  }\n  let newData = [...state.data];\n  let newMyBookList = [...state.myBookList];\n  let newBookListBySubject = [...state.bookListBySubject];\n  let newState;\n  let newNoticeList = [...state.noticeList];\n  let newSubject = { selected_subject: action.subject };\n  let newID = { selected_id: action.id }; //현재 선택한 값\n  let newBookDetail;\n\n  let targetData = newData.find((currentData) => {\n    return currentData.bookId === newID.selected_id;\n  });\n  let targetIndex = newMyBookList.findIndex(\n    (currentData) => currentData.bookId === newID.selected_id\n  );\n  let existData = newMyBookList.find((currentData) => {\n    return currentData.bookId === newID.selected_id;\n  });\n  let targetDataBySubject = newData.filter((currentData) => {\n    return currentData.subjects === newSubject.selected_subject;\n  });\n  let targetDataBySearch = newData.filter((currentData) => {\n    return currentData.title.includes(action.search);\n  });\n\n  switch (action.type) {\n    case \"like\":\n      targetData.likeNum === 0\n        ? (targetData.likeNum += 1)\n        : (targetData.likeNum -= 1);\n\n      break;\n    case \"addMyList\":\n      if (targetData.stock <= 0) {\n        alert(\"더이상 빌릴 수 없습니다\");\n      } else if (existData === undefined) {\n        alert(\"대여가 완료되었습니다.\");\n        newMyBookList.push(targetData);\n        targetData.stock -= 1;\n      } else {\n        alert(\"이미 담겨 있습니다.\");\n      }\n      break;\n    case \"removeMyList\":\n      alert(\"반납하시겠습니까?\");\n      newMyBookList.splice(targetIndex, 1);\n      targetData.stock += 1;\n      break;\n    case \"handleSubject\":\n      newBookListBySubject.pop();\n      newBookListBySubject.push(targetDataBySubject);\n      break;\n    case \"handleSearch\":\n      newBookListBySubject.pop();\n      newBookListBySubject.push(targetDataBySearch);\n      break;\n    case \"handleAll\":\n      newBookListBySubject.pop();\n      newBookListBySubject.push(newData);\n      break;\n    case \"bookDetail\":\n      newBookDetail = [];\n      newBookDetail.push(targetData);\n      break;\n\n    default:\n      break;\n  }\n  newState = {\n    ...state,\n    data: newData,\n    myBookList: newMyBookList,\n    bookListBySubject: newBookListBySubject,\n    bookDeatil: newBookDetail,\n    noticeList: newNoticeList,\n  };\n  return newState;\n}\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default createStore(reducer, composeEnhancer(applyMiddleware(thunk)));\n"]},"metadata":{},"sourceType":"module"}