{"ast":null,"code":"import { applyMiddleware, createStore, compose } from \"redux\"; // import _data from \"./book.json\";\n\nimport _notice from \"./notice.json\";\nimport axios from \"./axios/axios\";\nimport thunk from \"redux-thunk\";\n\nconst getData = () => {\n  const book = [];\n  axios.get(\"book/all\").then(result => {\n    result.data.forEach(item => {\n      book.push(item);\n    });\n  });\n  return book;\n};\n\nfunction reducer(state, action) {\n  if (state === undefined) {\n    // let mockData = _data.concat();\n    let notice = _notice.concat();\n\n    return {\n      selected_id: 1,\n      selected_subjects: \"\",\n      bookListBySubject: getData(),\n      myBookList: [],\n      bookDeatil: [],\n      data: getData(),\n      noticeList: notice\n    };\n  }\n\n  let newData = [...state.data];\n  let newMyBookList = [...state.myBookList];\n  let newBookListBySubjects = [...state.bookListBySubjects];\n  let newState;\n  let newNoticeList = [...state.noticeList];\n  let newSubject = {\n    selected_subjects: action.subject\n  };\n  let newID = {\n    selected_id: action.id\n  }; //현재 선택한 값\n\n  let newBookDetail;\n  let targetData = newData.find(currentData => {\n    return currentData.id === newID.selected_id;\n  });\n  let targetIndex = newMyBookList.findIndex(currentData => currentData.id === newID.selected_id);\n  let existData = newMyBookList.find(currentData => {\n    return currentData.id === newID.selected_id;\n  });\n  let targetDataBySubject = newData.filter(currentData => {\n    return currentData.subjects === newSubject.selected_subjects;\n  });\n  let targetDataBySearch = newData.filter(currentData => {\n    return currentData.title.includes(action.search);\n  });\n\n  switch (action.type) {\n    case \"like\":\n      if (targetData.like === 0) targetData.like += 1;else if (targetData.like === 1) targetData.like -= 1;\n      break;\n\n    case \"addMyList\":\n      if (targetData.stock <= 0) {\n        alert(\"더이상 빌릴 수 없습니다\");\n      } else if (existData === undefined) {\n        alert(\"대여가 완료되었습니다.\");\n        newMyBookList.push(targetData);\n        targetData.stock -= 1;\n      } else {\n        alert(\"이미 담겨 잇습니다.\");\n      } // newMyBookList.push(targetData);\n\n\n      break;\n\n    case \"removeMyList\":\n      newMyBookList.splice(targetIndex, 1);\n      targetData.stock += 1;\n      break;\n\n    case \"handleSubject\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(targetDataBySubject);\n      break;\n\n    case \"handleSearch\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(targetDataBySearch);\n      break;\n\n    case \"handleAll\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(newData);\n      break;\n\n    case \"bookDetail\":\n      newBookDetail = [];\n      newBookDetail.push(targetData);\n      break;\n\n    default:\n      break;\n  }\n\n  newState = { ...state,\n    data: newData,\n    myBookList: newMyBookList,\n    bookListBySubjects: newBookListBySubjects,\n    bookDeatil: newBookDetail,\n    noticeList: newNoticeList\n  };\n  return newState;\n}\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport default createStore(reducer, composeEnhancer(applyMiddleware(thunk)));","map":{"version":3,"sources":["/Users/jiyeong/Desktop/SHARE_BILLAGE/front_end/src/store.js"],"names":["applyMiddleware","createStore","compose","_notice","axios","thunk","getData","book","get","then","result","data","forEach","item","push","reducer","state","action","undefined","notice","concat","selected_id","selected_subjects","bookListBySubject","myBookList","bookDeatil","noticeList","newData","newMyBookList","newBookListBySubjects","bookListBySubjects","newState","newNoticeList","newSubject","subject","newID","id","newBookDetail","targetData","find","currentData","targetIndex","findIndex","existData","targetDataBySubject","filter","subjects","targetDataBySearch","title","includes","search","type","like","stock","alert","splice","pop","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__"],"mappings":"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","sourcesContent":["import { applyMiddleware, createStore, compose } from \"redux\";\n// import _data from \"./book.json\";\nimport _notice from \"./notice.json\";\nimport axios from \"./axios/axios\";\nimport thunk from \"redux-thunk\";\nconst getData = () => {\n  const book = [];\n  axios.get(\"book/all\").then((result) => {\n    result.data.forEach((item) => {\n      book.push(item);\n    });\n  });\n  return book;\n};\nfunction reducer(state, action) {\n  if (state === undefined) {\n    // let mockData = _data.concat();\n    let notice = _notice.concat();\n    return {\n      selected_id: 1,\n      selected_subjects: \"\",\n      bookListBySubject: getData(),\n      myBookList: [],\n      bookDeatil: [],\n      data: getData(),\n      noticeList: notice,\n    };\n  }\n  let newData = [...state.data];\n  let newMyBookList = [...state.myBookList];\n  let newBookListBySubjects = [...state.bookListBySubjects];\n  let newState;\n  let newNoticeList = [...state.noticeList];\n  let newSubject = { selected_subjects: action.subject };\n  let newID = { selected_id: action.id }; //현재 선택한 값\n  let newBookDetail;\n  let targetData = newData.find((currentData) => {\n    return currentData.id === newID.selected_id;\n  });\n  let targetIndex = newMyBookList.findIndex(\n    (currentData) => currentData.id === newID.selected_id\n  );\n  let existData = newMyBookList.find((currentData) => {\n    return currentData.id === newID.selected_id;\n  });\n  let targetDataBySubject = newData.filter((currentData) => {\n    return currentData.subjects === newSubject.selected_subjects;\n  });\n  let targetDataBySearch = newData.filter((currentData) => {\n    return currentData.title.includes(action.search);\n  });\n  switch (action.type) {\n    case \"like\":\n      if (targetData.like === 0) targetData.like += 1;\n      else if (targetData.like === 1) targetData.like -= 1;\n      break;\n    case \"addMyList\":\n      if (targetData.stock <= 0) {\n        alert(\"더이상 빌릴 수 없습니다\");\n      } else if (existData === undefined) {\n        alert(\"대여가 완료되었습니다.\");\n        newMyBookList.push(targetData);\n        targetData.stock -= 1;\n      } else {\n        alert(\"이미 담겨 잇습니다.\");\n      }\n      // newMyBookList.push(targetData);\n      break;\n    case \"removeMyList\":\n      newMyBookList.splice(targetIndex, 1);\n      targetData.stock += 1;\n      break;\n    case \"handleSubject\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(targetDataBySubject);\n      break;\n    case \"handleSearch\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(targetDataBySearch);\n      break;\n    case \"handleAll\":\n      newBookListBySubjects.pop();\n      newBookListBySubjects.push(newData);\n      break;\n    case \"bookDetail\":\n      newBookDetail = [];\n      newBookDetail.push(targetData);\n      break;\n\n    default:\n      break;\n  }\n  newState = {\n    ...state,\n    data: newData,\n    myBookList: newMyBookList,\n    bookListBySubjects: newBookListBySubjects,\n    bookDeatil: newBookDetail,\n    noticeList: newNoticeList,\n  };\n  return newState;\n}\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default createStore(reducer, composeEnhancer(applyMiddleware(thunk)));\n"]},"metadata":{},"sourceType":"module"}